{% if product.id != blank %}
  <section class="product-recommendations" data-product-recommendations data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit=4">

    {% if section.settings.heading != blank %}
      <h2 class="product-recommendations__title text-base">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="product-recommendations__swiper">
      <div class="swiper" data-recommendation-swiper>
        <div class="swiper-wrapper">
          {%- if recommendations.performed and recommendations.products_count > 0 -%}
            {% for recommendation in recommendations.products %}
              <div class="product-recommendations__card swiper-slide">
                {% render "product-card", product: recommendation, showATC: false %}
              </div>
            {% endfor %}
          {%- endif -%}
        </div>
      </div>
    </div>

  </section>
{% endif %}

{% schema %}
  {
    "name": "Product Recommendations",
    "limit": 1,
    "enabled_on": {
      "templates": ["product"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Content"
      }, {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "You may also like"
      }
    ],
    "presets": [
      {
        "name": "Product Recommendations"
      }
    ]
  }
{% endschema %}